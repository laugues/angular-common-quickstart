/*!
 * Copyright 2015 itesoft.
 * http://itesoft.com/
 *
 * webapp_seed, v2.6.1
 * A powerful music manager.*/
!function(){angular.module("BalanceForms.directives",[]),angular.module("BalanceForms",["itesoft","ngRoute","ngResource","ngSanitize","pascalprecht.translate","ui.bootstrap.dropdown","BalanceForms.directives"]).config(["$translateProvider","$translatePartialLoaderProvider",function(e,n){e.registerAvailableLanguageKeys(["en","fr","de"],{en_US:"en",en_GB:"en",fr_FR:"fr","fr-CA":"fr","de-DE":"de"}).determinePreferredLanguage(),e.useLoader("$translatePartialLoader",{urlTemplate:"assets/locale/{lang}/{part}-{lang}.json"}),e.useSanitizeValueStrategy()}]).run(["$rootScope","$route",function(e,n){e.$on("$routeChangeSuccess",function(){e.pageTitle=n.current.title})}]),angular.module("BalanceForms").config(["$routeProvider",function(e){e.when("/invoices",{templateUrl:"app/features/invoice/invoiceView.html",controller:"InvoiceController",title:"INVOICE.TITLE",resolve:{translationPart:["TranslationService",function(e){return e("invoice")}]}}).otherwise({redirectTo:"/invoices"})}]),angular.module("BalanceForms").controller("MainController",["$scope","$translate","AuthService",function(e,n,r){e.currentLanguage="fr_FR",e.authService=r,e.changeLanguage=function(r){e.currentLanguage=r,n.use(r)}}]),angular.module("BalanceForms.directives").directive("itAngularBlocks",["$templateCache","$compile","$http","$q","$log","$timeout",function(e,n,r,a,t,o){function l(e,n){t.warn("Failed to find "+e+" in "+n)}function c(c,p,g,v,m){p.removeAttr("extends-template"),m(c.$parent,function(c,v){o(function(){var o=g.extendTemplate;if(!o)throw"Template not specified in extend-template directive";var m=r.get(o,{cache:e}),h=m.then(function(e){function n(e,n){n=angular.element(n);var r=n.attr(e),a='[id="'+o+'"] > [data-block="'+r+'"]',c='[id="'+o+'"] > [data-block-append="'+r+'"]',i='[id="'+o+'"] > [data-block-prepend="'+r+'"]',u='[id="'+o+'"] > [data-block-after="'+r+'"]',d='[id="'+o+'"] > [data-block-before="'+r+'"]',s=angular.element(t)[0].querySelector(a+","+c+","+i+","+u+","+d);s=angular.element(s),s.length||l(r,o);var f={before:function(){s.parent()[0].insertBefore(n[0],s[0])},after:function(){s.after(n)},prepend:function(){s.prepend(n)},append:function(){s.append(n)},replace:function(){s.replaceWith(n)}};return f}for(var r=e.data,t=angular.element("<div></div>").html(r),p=0;p<c.length;p++){var g=c[p],v=0;if(g&&!(g.nodeType>1)){if(v>0)throw"Must have only one root element";v++;var m=document.createElement("div");angular.element(m).append(g);var h=(a.defer(),angular.element(m.querySelectorAll("["+i+"]")));angular.forEach(h,function(e){var r=n(i,e);r.replace()});var $=angular.element(m.querySelectorAll("["+d+"]"));angular.forEach($,function(e){var r=n(d,e);r.prepend()});var S=angular.element(m.querySelectorAll("["+u+"]"));angular.forEach(S,function(e){var r=n(u,e);r.append()});var b=angular.element(m.querySelectorAll("["+s+"]"));angular.forEach(b,function(e){var r=n(s,e);r.before()});var A=angular.element(m.querySelectorAll("["+f+"]"));angular.forEach(A,function(e){var r=n(f,e);r.after()})}}return t},function(e){t.error('Can not retrieve template "',e,'"');var n="Failed to load template: "+o;return t.error(n),a.reject(n)});h.then(function(e){p.html(e.html()),n(p.contents())(v)})},0)})}var i="data-block",u="data-block-append",d="data-block-prepend",s="data-block-before",f="data-block-after";return{transclude:"true",restrict:"A",scope:{extendTemplate:"="},replace:!0,priority:1e4,link:c}}]),angular.module("BalanceForms").factory("Invoices",["$resource",function(e){return e("http://clilds:8080/api/rest/get",{},{getAll:{method:"GET",params:{},isArray:!0}})}]),angular.module("BalanceForms").service("TranslationService",["$q","$translate","$translatePartialLoader",function(e,n,r){return function(){return r.addPart("global"),angular.forEach(arguments,function(e){r.addPart(e)}),n.refresh()}}]),angular.module("BalanceForms").controller("InvoiceController",["$scope","Invoices",function(e,n){e.invoices=n.getAll(),e.selectedInvoice=null,e.view=function(n){e.selectedInvoice=n,e.templateUrl="app/template/"+e.selectedInvoice.countryCode.toLowerCase()+"/invoice/invoiceTemplate.html",console.log("$scope.templateUrl  ",e.templateUrl)},e.validate=function(e){console.log("Validating invoice "+e.id+"...."),console.log("Validating invoice "+e.id+" DONE.")}}]),angular.module("BalanceForms").factory("AuthService",["$rootScope",function(e){return e.user=null,{login:function(n){e.user=n},logout:function(){e.user=null},currentUser:function(){return e.user}}}]),angular.module("BalanceForms").controller("LoginController",["$scope","AuthService",function(e,n){e.authService=n}])}();